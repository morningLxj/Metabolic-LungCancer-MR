# =============================================================================
# Configuration File for Metabolic Lung Cancer MR Analysis
# =============================================================================
# This file contains all configuration parameters for the analysis
# Author: morningLxj
# Date: 2024-12-01
# =============================================================================

# Data Configuration
data:
  # Input file paths
  exposure_gwas: "data/raw/exposure_gwas.txt"
  outcome_gwas: "data/raw/outcome_gwas.txt"
  mediator_gwas: "data/raw/mediator_gwas.txt"
  
  # Reference data paths
  ld_reference: "data/reference/ld_reference.txt"
  snp_annotation: "data/reference/snp_annotation.txt"
  
  # Output directory structure
  output_base: "results/"
  temp_dir: "temp/"
  log_dir: "logs/"

# Analysis Parameters
analysis:
  # GWAS Quality Control
  gwqc:
    maf_threshold: 0.01
    hwe_threshold: 1e-10
    info_threshold: 0.8
    sample_size_min: 1000
  
  # Instrument Selection
  instruments:
    pval_threshold: 5e-8
    clump_r2: 0.001
    clump_kb: 10000
    fstat_threshold: 10
    force_exposure: false
  
  # MR Analysis Methods
  mr_methods:
    primary:
      - "mr_ivw_fixed"
      - "mr_egger_regression"
      - "mr_weighted_median"
      - "mr_simple_mode"
    sensitivity:
      - "mr_ivw_random"
      - "mr_weighted_mode"
      - "mr_simple_mode_nome"
  
  # Statistical Thresholds
  thresholds:
    pval_sig: 0.05
    pval_fdr: 0.1
    pval_horizon: 0.05
    fdr_method: "BH"
  
  # Sensitivity Analysis
  sensitivity:
    mr_presso: true
    horizontal_pleiotropy: true
    heterogeneity_test: true
    leave_one_out: true
    outlier_detection: true

# Visualization Parameters
visualization:
  # Figure settings
  figures:
    width: 12
    height: 8
    dpi: 300
    format: "png"
    theme: "theme_minimal"
    color_palette: "viridis"
  
  # Specific plot types
  plots:
    scatter_plot: true
    forest_plot: true
    funnel_plot: true
    leave_one_out_plot: true
    mr_presso_plot: true
    regional_plot: true

# Reporting Parameters
reporting:
  # Document generation
  reports:
    generate_rmarkdown: true
    generate_html: true
    generate_pdf: false
    template_file: "docs/templates/analysis_report.Rmd"
  
  # Summary statistics
  summary_stats:
    include_qq_plots: true
    include_manhattan_plots: true
    include_power_analysis: false
    include_sensitivity_plots: true

# System Configuration
system:
  # Parallel processing
  parallel:
    use_multicore: true
    n_cores: "auto"  # or integer value
    max_jobs: 4
  
  # Memory management
  memory:
    max_memory: "8GB"
    gc_frequency: 1000
    clean_temp_files: true
  
  # Logging
  logging:
    level: "INFO"
    log_to_file: true
    log_file: "logs/analysis.log"
    verbose_output: true

# Specific Analysis Settings
lung_cancer:
  # Cancer type specific settings
  cancer_types:
    - "NSCLC"
    - "SCLC"
    - "Adenocarcinoma"
    - "Squamous"
  
  # Endpoint definitions
  endpoints:
    primary: "lung_cancer_any"
    secondary: 
      - "lung_cancer_by_histology"
      - "lung_cancer_by_stage"
  
  # Covariate adjustment
  covariates:
    age: true
    sex: true
    smoking: true
    bmi: false

metabolic_traits:
  # Metabolic traits of interest
  traits:
    - "BMI"
    - "Type2_Diabetes"
    - "Fasting_Glucose"
    - "HbA1c"
    - "Insulin"
    - "Triglycerides"
    - "HDL_Cholesterol"
    - "LDL_Cholesterol"
  
  # Default trait settings
  trait_defaults:
    exposure_trait: "BMI"
    standard_units: true
    log_transform: false

# Quality Control Flags
qc_flags:
  # Check for potential issues
  check_duplicates: true
  check_palindromic: true
  check_strand_ambiguous: true
  validate_rsids: true
  
  # Action on issues
  remove_duplicates: true
  remove_palindromic: true
  remove_strand_ambiguous: false
  report_validation_errors: true

# Advanced Options
advanced:
  # Custom analysis options
  custom_options:
    use_mvmr: false
    use_ivmr: false
    use_local_ld: false
  
  # Reproducibility
  reproducibility:
    set_seed: true
    random_seed: 12345
    session_info_file: "logs/session_info.txt"
  
  # Validation
  validation:
    cross_validate: false
    bootstrap_replicates: 1000
    save_intermediate_results: true